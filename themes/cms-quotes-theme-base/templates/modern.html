<!--
  templateType: quote
  isAvailableForNewContent: true
  label: Modern
  screenshotPath: ../images/modern.png
-->

{% extends './layouts/base.html' %}

{% block stylesheet %}
  {{ require_css(get_asset_url("../css/modern.css")) }}
{% endblock stylesheet %}

{% if html_lang_dir == 'dir="rtl"' %}
  {{ require_css(get_asset_url("../css/rtl-print.css")) }}
{% endif %}

{% block body %}

{% require_css %}
  <style>
    .line-items__table #line-items__table-body {
      border-top: 2px solid rgba({{ theme.global_colors.primary_color.color|convert_rgb }}, {{ theme.global_colors.primary_color.opacity / 100 }});
      border-bottom: 2px solid rgba({{ theme.global_colors.primary_color.color|convert_rgb }}, {{ theme.global_colors.primary_color.opacity / 100 }});
    }

    {% if module_data|attr('logo')|attr('hidden') %}
      .hs-quotes .header { display: none; }
    {% endif %}

    {% if module_data|attr('quote_name')|attr('hidden') &&
      module_data|attr('buyer_company')|attr('hidden') &&
      module_data|attr('buyer_contacts')|attr('hidden') &&
      module_data|attr('reference')|attr('hidden') &&
      module_data|attr('quote_created')|attr('hidden') &&
      module_data|attr('quote_expires')|attr('hidden') &&
      module_data|attr('sender_user')|attr('hidden')
    %}
      .hs-quotes .banner--top { display: none; }
    {% endif %}

    {% if module_data|attr('line_items_table')|attr('hidden') %}
      .hs-quotes .line-items { display: none; }
    {% endif %}

    {% if module_data|attr('terms')|attr('hidden') %}
      .hs-quotes .terms { display: none; }
    {% endif %}

    {% if !QUOTE.hs_esign_enabled && !QUOTE.hs_show_signature_box %}
      .hs-quotes .esign { display: none; }
    {% endif %}

    {% if module_data|attr('payment-schedule')|attr('hidden') || !ASSOCIATED_OBJECTS.payment_schedule %}
      .hs-quotes .payment-schedule { display: none; }
    {% endif %}

    {% if !QUOTE.hs_payment_enabled %}
      .hs-quotes .payment { display: none; }
    {% endif %}

    {% if module_data|attr('sender_contact')|attr('hidden') &&
      module_data|attr('sender_company')|attr('hidden')
    %}
      .hs-quotes .contacts { display: none; }
    {% endif %}

    {% if module_data|attr('download')|attr('hidden') &&
      module_data|attr('print')|attr('hidden')
    %}
      .hs-quotes .options { display: none; }
    {% endif %}
  </style>
{% end_require_css %}

<body class="hs-quotes hs-quotes--modern">
  <div class="header">
    <div class="container">
      {% module "logo" path="../modules/quote_logo" %}
    </div>
  </div>

  <div class="colored-section banner banner--top">
    <div class="container">
      {% module "quote_name"
        label="Quote name"
        path="@hubspot/rich_text"
        html="<h1>{{ personalization_token('template_data.quote.hs_title', '')|render|sanitize_html }}</h1>"
      %}

      <div class="quote-info_wrapper">
        <div class="recipient-info">
          {% module "buyer_company" path="../modules/buyer_company" %}
          {% module "buyer_contacts" path="../modules/buyer_contacts" %}
        </div>
        <div class="quote-info">
          {% module "reference" path="../modules/reference" %}
          {% module "quote_created" path="../modules/quote_created" %}
          {% module "quote_expires" path="../modules/quote_expires" %}
          {% module "sender_user"
            label="Created by"
            path="@hubspot/rich_text",
            html={{
              template_translations.quote_created_by.message ~ " " ~ ptoken_sender_full_name ~ "<br>" ~
              ptoken_sender_title ~ "<br>" ~
              ptoken_sender_email ~ "<br>" ~
              ptoken_sender_phone
            }}
          %}
        </div>
      </div>
    </div>
  </div>

  <div class="container comments">
    <div class="comments-text_wrapper">
      {% module "comments"
        label="Comments"
        path="@hubspot/rich_text"
        html={{
          "<h2>" ~ template_translations.comments_from.message ~ " " ~ ptoken_sender_full_name ~ "</h2>" ~
          ptoken_comments
        }}
      %}
    </div>
  </div>

  <div class="container line-items">
    {% module "line_items_table"
      path="../modules/line_items_table",
      line_item_column=[
        {
          "column_title": template_translations.item_and_description.message,
          "column_property": "item_description"
        },
        {
          "column_title": template_translations.quantity.message,
          "column_property": "quantity"
        },
        {
          "column_title": template_translations.unit_price.message,
          "column_property": "price"
        },
        {
          "column_title": template_translations.total.message,
          "column_property": "amount"
        }
      ]
    %}
  </div>

  <div class="container terms">
    {% module "terms"
      label="Terms"
      path="@hubspot/rich_text",
      html={{
        "<h2>" ~ template_translations.purchase_terms.message ~ "</h2>" ~
        ptoken_terms
      }}
    %}
  </div>

  <div class="container esign">
    {% module "signature" path="@hubspot/quote_signature" %}
  </div>

  <div class="container payment-schedule">
    {% module "payment-schedule" path="@hubspot/quote_payment_schedule" %}
  </div>

  <div class="container payment">
    {% module "payment" path="@hubspot/quote_payment" heading_tag="h2" %}
  </div>

  <div class="container contacts">
    {% module "sender_contact" path="../modules/sender_contact" %}
    <br>
    {% module "sender_company"
      label="Sender company"
      path="@hubspot/rich_text"
      html="
        <div>{{ personalization_token('template_data.quote.hs_sender_company_name', '') }}</div>
        <div>{{ personalization_token('template_data.quote.hs_sender_company_address', '') }}</div>
        <div>{{ personalization_token('template_data.quote.hs_sender_company_address2', '') }}</div>
        <div>
        {{ personalization_token('template_data.quote.hs_sender_company_city', '') }}{% if template_data.quote.hs_sender_company_city %},{% endif %}
        {{ personalization_token('template_data.quote.hs_sender_company_state', '') }}
        {{ personalization_token('template_data.quote.hs_sender_company_zip', '') }}
        </div>
        <div>{{ personalization_token('template_data.quote.hs_sender_company_country', '') }}</div>
      "
    %}
  </div>

  <div class="container options">
    <div class="option_wrapper">
      {% module "download" path="@hubspot/quote_download" %}
      {% module "print" path="../modules/print" %}
    </div>
  </div>

</body>
{% endblock body %}
